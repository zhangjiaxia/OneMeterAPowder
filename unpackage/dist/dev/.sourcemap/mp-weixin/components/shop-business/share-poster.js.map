{"version":3,"sources":["webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?c9c4","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?02bd","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?d4ad","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?ae66","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?8f69","webpack:///D:/project/uniRiceNoodle/components/shop-business/share-poster.vue?b5bf"],"names":["props","confirmModal","type","Boolean","default","bgImg","String","data","panelTop","shareModal","shareInfo","qrcode","width","height","systemInfo","poster","mounted","getPanelTop","methods","touch","uni","getSystemInfoSync","pxToRpxScale","windowWidth","scrollHeight","windowHeight","statusBarHeight","getQrcode","that","interfaceurl","checkAuth","getAppletCode","then","res","saveQrCode","url","wx","downloadFile","success","statusCode","tempFilePath","drawBefore","query","createSelectorQuery","select","boundingClientRect","drawImage","exec","saveImg","e","showLoading","title","saveImageToPhotosAlbum","filePath","hideLoading","showModal","content","showCancel","fail","err","errMsg","modalSuccess","openSetting","settingdata","console","log","authSetting","failData","complete","finishData","previewImg","previewImage","urls","canvasAttrs","ctx","createCanvasContext","canvasW","canvasH","pixelRatio","qrcodeW","rate","radius","beginPath","save","setLineWidth","setStrokeStyle","moveTo","lineTo","closePath","clip","fillStyle","fillRect","stroke","restore","setLineDash","strokeStyle","setFillStyle","setFontSize","userInfo","getStorageSync","fillText","nickName","draw","setTimeout","canvasToTempFilePath","x","y","destWidth","destHeight","canvasId"],"mappings":"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","file":"components/shop-business/share-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./share-poster.vue?vue&type=template&id=3cd09dd2&\"\nvar renderjs\nimport script from \"./share-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./share-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./share-poster.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uniRiceNoodle/components/shop-business/share-poster.vue\"\nexport default component.exports","export * from \"-!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share-poster.vue?vue&type=template&id=3cd09dd2&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.shareModal = false\n    }\n\n    _vm.e1 = function($event) {\n      _vm.shareModal = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport interfaceurl from '@/utils/interface.js'\nexport default {\n\tprops: {\n\t\tconfirmModal: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}, //商品sku面板是否展示\n\t\tbgImg: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t} //分享的海报图\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpanelTop: '130rpx', //弹窗与顶部的距离\n\t\t\tshareModal: false, //是否显示分享弹窗\n\t\t\t//画布绘制所需的图片\n\t\t\tshareInfo: {\n\t\t\t\tbgImg: this.bgImg,\n\t\t\t\tqrcode: '' //动态生成的二维码\n\t\t\t},\n\t\t\t//画布的宽高\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tsystemInfo: {}, //系统信息\n\t\t\tposter: '', //生成的海报\n\t\t};\n\t},\n\tmounted() {\n\t\t//计算弹窗与顶部的距离\n\t\tthis.getPanelTop()\n\t},\n\tmethods: {\n\t\ttouch() {},\n\t\tgetPanelTop() {\n\t\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\t\tthis.systemInfo = systemInfo\n\t\t\tlet pxToRpxScale = 750 / systemInfo.windowWidth;\n\t\t\tthis.systemInfo.pxToRpxScale = pxToRpxScale\n\t\t\t//滚动区域等于窗体高度（不包含底部tab高度）-状态栏高度-导航栏高度\n\t\t\tlet scrollHeight = (systemInfo.windowHeight - systemInfo.statusBarHeight - 44) * pxToRpxScale\n\t\t\t//（滚动区域高度-弹窗高度）/2+状态栏高度+导航栏高度\n\t\t\tthis.panelTop = ((scrollHeight - 1068) / 2 + (systemInfo.statusBarHeight + 44) * pxToRpxScale) + 'rpx'\n\t\t},\n\t\t/*海报相关*/\n\t\t//获取动态二维码（可携带参数）\n\t\tgetQrcode() {\n\t\t\tthis.shareModal = true\n\t\t\tif(this.poster) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet that = this;\n\t\t\tinterfaceurl.checkAuth(interfaceurl.getAppletCode, {}).then((res) => {\n\t\t\t\tthat.saveQrCode(res.data.url)\n\t\t\t});\n\t\t},\n\t\t// 保存接口传回来的小程序二维码链接\n\t\tsaveQrCode(url) {\n\t\t\tlet that = this;\n\t\t\twx.downloadFile({\n\t\t\t\turl: url, //网络链接\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t// 只要服务器有响应数据，就会把响应内容写入文件并进入 success 回调，业务需要自行判断是否下载到了想要的内容\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t//将下载的图片临时路径赋值给img_l,用于预览图片\n\t\t\t\t\t\tthat.shareInfo.qrcode = res.tempFilePath;\n\t\t\t\t\t\twx.downloadFile({\n\t\t\t\t\t\t\turl: that.shareInfo.bgImg, //网络链接\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t// 只要服务器有响应数据，就会把响应内容写入文件并进入 success 回调，业务需要自行判断是否下载到了想要的内容\n\t\t\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t\t\t//将下载的图片临时路径赋值给img_l,用于预览图片\n\t\t\t\t\t\t\t\t\tthat.shareInfo.bgImg = res.tempFilePath;\n\t\t\t\t\t\t\t\t\t//console.log('that.drawBefore', that.shareInfo)\n\t\t\t\t\t\t\t\t\tthat.drawBefore();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdrawBefore() {\n\t\t\tlet that = this;\n\t\t\tvar query = wx.createSelectorQuery()\n\t\t\tquery.select('#canvasPoster').boundingClientRect((res) => {\n\t\t\t\t// 返回值包括画布的实际宽高\n\t\t\t\tthat.drawImage(res);\n\t\t\t}).exec();\n\t\t},\n\t\t// 保存海报\n\t\tsaveImg(e) {\n\t\t\tlet that = this\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '保存中...'\n\t\t\t})\n\t\t\t// wx.downloadFile({\n\t\t\t// \turl: that.poster,\n\t\t\t// \tsuccess: function(res) {\n\t\t\t\t\t//图片保存到本地\n\t\t\t\t\twx.saveImageToPhotosAlbum({\n\t\t\t\t\t\tfilePath: that.poster, //res.tempFilePath,\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\twx.hideLoading()\n\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tcontent: '您的推广海报已存入手机相册，赶快分享给好友吧',\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\t\tif (err.errMsg === \"saveImageToPhotosAlbum:fail:auth denied\" || err.errMsg ===\n\t\t\t\t\t\t\t\t\"saveImageToPhotosAlbum:fail auth deny\") {\n\t\t\t\t\t\t\t\t// 这边微信做过调整，必须要在按钮中触发，因此需要在弹框回调中进行调用\n\t\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: '需要您授权保存相册',\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: modalSuccess => {\n\t\t\t\t\t\t\t\t\t\twx.openSetting({\n\t\t\t\t\t\t\t\t\t\t\tsuccess(settingdata) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"settingdata\", settingdata)\n\t\t\t\t\t\t\t\t\t\t\t\tif (settingdata.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\t\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '获取权限成功,再次点击图片即可保存',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '获取权限失败，将无法保存到相册哦~',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tfail(failData) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"failData\", failData)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tcomplete(finishData) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"finishData\", finishData)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t//}\n\t\t\t//})\n\t\t},\n\t\tpreviewImg() {\n\t\t\tif (this.poster) {\n\t\t\t\t//预览图片，预览后可长按保存或者分享给朋友\n\t\t\t\twx.previewImage({\n\t\t\t\t\turls: [this.poster]\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tdrawImage(canvasAttrs) {\n\t\t\tlet that = this;\n\t\t\tlet ctx = wx.createCanvasContext('canvasPoster', this)\n\t\t\tlet canvasW = that.width // 画布的真实宽度660canvasAttrs.width\n\t\t\tlet canvasH = that.height //画布的真实高度980canvasAttrs.height\n\t\t\t// 头像和二维码大小都需要在规定大小的基础上放大像素比的比例后面都会 *this.systemInfo.pixelRatio\n\t\t\tlet pixelRatio = this.systemInfo.pixelRatio\n\t\t\tthis.systemInfo.pixelRatio = this.systemInfo.pxToRpxScale\n\t\t\tlet qrcodeW = 160 / this.systemInfo.pixelRatio\n\t\t\tlet rate = this.systemInfo.pixelRatio\n\t\t\tlet radius = 10 * rate\n\t\t\t // 白色背景\n\t\t\t  ctx.beginPath();\n\t\t\t  ctx.save();\n\t\t\t  ctx.setLineWidth(1)\n\t\t\t  ctx.setStrokeStyle('#fff')\n\t\t\t  ctx.moveTo(0/rate,0/rate);           // 创建开始点\n\t\t\tctx.lineTo(650/rate,0/rate);          // 创建水平线\n\t\t\t//ctx.arcTo(630*rate,0*rate,650*rate,20*rate,radius); // 创建弧\n\t\t\t//ctx.lineTo(162.5*rate,5*rate); \n\t\t\t\n\t\t\tctx.lineTo(650/rate,900/rate);         // 创建垂直线\n\t\t\t//ctx.arcTo(650*rate,880*rate,630*rate,900*rate,radius); // 创建弧\n\t\t\t//ctx.lineTo(157.5*rate,225*rate); \n\t\t\t\n\t\t\tctx.lineTo(0/rate,900/rate);         // 创建水平线\n\t\t\t//ctx.arcTo(20*rate,900*rate,0*rate,880*rate,radius); // 创建弧\n\t\t\t//ctx.lineTo(0*rate,220*rate); \n\t\t\t\n\t\t\tctx.lineTo(0/rate,0/rate);         // 创建垂直线\n\t\t\t//ctx.arcTo(0*rate,20*rate,20*rate,0*rate,radius); // 创建弧\n\t\t\t//ctx.lineTo(5*rate,0*rate); \n\t\t\t  ctx.closePath()\n\t\t\t  ctx.clip();\n\t\t\t  ctx.fillStyle=\"#fff\";\n\t\t\t  ctx.fillRect(0,0,800,800); //填充白色区域的范围\n\t\t\t  ctx.stroke();\n\t\t\t  ctx.restore();\n\t\t\t//海报图片\n\t\t\tctx.drawImage(this.shareInfo.bgImg, 25 / this.systemInfo.pixelRatio, 25 / this.systemInfo.pixelRatio, 600 / this.systemInfo\n\t\t\t\t.pixelRatio, 600 / this.systemInfo.pixelRatio)\n\t\t\tctx.save()\n\t\t\tctx.beginPath();\n\t\t\tctx.setLineDash([2,3]);\n\t\t\tctx.strokeStyle = '#D3D1D2';\n\t\t\t//设置开始坐标\n\t\t\tctx.moveTo(0,708 / this.systemInfo.pixelRatio);\n\t\t\t//设置结束坐标\n\t\t\tctx.lineTo(650,708 / this.systemInfo.pixelRatio);\n\t\t\t//绘制虚线\n\t\t\tctx.stroke();\n\t\t\t//文字绘制\n\t\t\tctx.setFillStyle('#333333') // 文字颜色：黑色\n\t\t\tctx.setFontSize(30 / this.systemInfo.pixelRatio) // 文字字号：22px\n\t\t\tlet userInfo = uni.getStorageSync('userInfo')\n\t\t\tctx.fillText(userInfo.nickName+\" 为您推荐好货\", 25 / this.systemInfo.pixelRatio, 680 / this.systemInfo.pixelRatio) //开始绘制文本的 x/y 坐标位置（相对于画布） \n\t\t\tctx.stroke(); //stroke() 方法会实际地绘制出通过 moveTo() 和 lineTo() 方法定义的路径。默认颜色是黑色\n\t\t\t//文字绘制\n\t\t\tctx.setFillStyle('#333333')\n\t\t\tctx.setFontSize(30 / this.systemInfo.pixelRatio)\n\t\t\tctx.fillText(\"长按识别小程序二维码\", 264 / this.systemInfo.pixelRatio, 767 / this.systemInfo.pixelRatio)\n\t\t\tctx.stroke();\n\t\t\t//文字绘制\n\t\t\tctx.setFillStyle('#666666')\n\t\t\tctx.setFontSize(24 / this.systemInfo.pixelRatio)\n\t\t\tctx.fillText(\"立即抢购\", 365 / this.systemInfo.pixelRatio, 812 / this.systemInfo.pixelRatio)\n\t\t\tctx.stroke();\n\t\t\t// 绘制二维码\n\t\t\tctx.drawImage(this.shareInfo.qrcode, 60 / this.systemInfo.pixelRatio, 720 / this.systemInfo.pixelRatio, qrcodeW, qrcodeW)\n\t\t\tctx.save()\n\t\t\t// 将前面绘制的各个图案一起画出来\n\t\t\tctx.draw()\n\t\t\t//需延迟保存画布，否则可能为空\n\t\t\tsetTimeout(() => {\n\t\t\t\twx.canvasToTempFilePath({\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\twidth: canvasW,\n\t\t\t\t\theight: canvasH,\n\t\t\t\t\tdestWidth: canvasW, //canvasW * pixelRatio,\n\t\t\t\t\tdestHeight: canvasH, //canvasH * pixelRatio,\n\t\t\t\t\tcanvasId: 'canvasPoster',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tthat.poster = res.tempFilePath\n\t\t\t\t\t\tconsole.log('that.poster', that.poster)\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}, 200)\n\t\t}\n\t}\n}\n","import mod from \"-!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share-poster.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share-poster.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1587950104524\n      var cssReload = require(\"D:/project/FrontEnd/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}